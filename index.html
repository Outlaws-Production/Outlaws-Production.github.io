---
layout: default
title: Home
---

<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Home</title>
    <style>
      html, body, body * {
	margin: 0;
	padding: 0;
}

body {
	background-color: #222;
}

body *::selection {
	color: black;
	background: white;
}

body {
	display: flex;
	justify-content: center;
	align-items: center;
	
	width: 100vw;
	height: 100vh
}

#terminal {
	box-shadow: 4px 4px 15px rgba(0, 0, 0, 0.25);
	border-radius: 3px;
}

#terminal-titlebar {
	display: flex;
	justify-content: center;
	align-items: center;
	
	height: 24px;
	
	font-family: Open Sans, Segoe UI, Calibri, sans-serif;
	font-size: 11px;
	color: black;
	
	backdrop-filter: invert(0.2) saturate(150%);
	
	border-radius: 3px 3px 0px 0px
}

#terminal-body {
	padding: 5px;
	
	flex-shrink: auto;
	
	width: 560px;
	max-width: 560px;
	height: 250px;
	max-height: 250px;
	
	font-family: Inconsolata, monospace;
	font-size: 14px;
	color: #dddddd;
	
	background-color: #111111;
	
	border-radius: 0px 0px 3px 3px;
	
	overflow-y: scroll;
}

#commandline {
	display: flex;
	flex-direction: row;
	
	color: inherit;
}

.posted {
	color: inherit;
}

.prompt {
	display: inline-block;
	flex-grow: 1;
	
	border: none;
	outline: none;
	
	font-family: inherit;
	font-size: inherit;
	color: inherit;
	background: inherit;
}
    </style>
  </head>
  <body>
    <script>
      // Terminal component (React)
class Terminal extends React.Component {
	constructor(props) {
		super(props);
		this.state = {
			history: []
		};
		
		this.handleKeyUp = this.handleKeyUp.bind(this);
	}
	
	handleKeyUp(e) {
		// If key was Enter key...
		if (event.keyCode == 13) {
			let input = e.target.value; // get current input val
			let split = input.split(' '); // split input by spaces
			
			e.target.value = ''; // clear prompt box
			this.log(input); // log input to terminal
			executeCommand(this, split.length, split);
		}
	}
	
	log(message) {
		this.setState(function(state, props) {
			return {
				history: [...state.history, message]
			}
		});
		let div = document.getElementById("terminal-body");
	}
	
	clear() {
		this.setState({
			history: []
		})
	}
	
	render() {
		const history = this.state.history.map((entry) => <div class="posted">{entry}</div>)
		return (
			<div id="terminal">
				<div id="terminal-titlebar">
				</div>
				<div id="terminal-body">
					{history}								  
					<div id="commandline">
						C:\><input type="text" class="prompt" onKeyUp={this.handleKeyUp}/>
					</div>
				</div>
			</div>
		);
		div.scrollTop = div.scrollHeight; // scroll terminal to bottom
	}
}

ReactDOM.render(<Terminal />, document.getElementById('App'));

// Auto-focus prompt on Click event
$('#terminal').on('click', function() {
	$('.prompt').focus();
})

// Auto-focus prompt input on Keydown event
$(document).keydown(function () {
	$(".prompt").focus();
});

var commands = {
	"help":	"display the command list, or get help with a specific command. (syntax: 'help [argument]')",
	"clear": "clears everything from the console.",
	"color": "changes the color of the terminal text. (syntax: 'color [color]')",
	"bgcolor": "changes the background of the screen. (syntax: 'bgcolor [color]')",
	"wincolor": "changes the background of the screen. (syntax: 'wincolor [color]')",
	//"muffin": "Meow Meow Meow Meow Meow Meow Meow Meow Meow Meow",
	"dir": "displays the files contained in the database",
	"read": "displays the contents of a file (syntax: 'read [filename])",
	"write": "writes a file with the specified contents (syntax: 'write [filename] [contents]')",
	"del": "erases a file from the database (syntax: 'del [filename]')",
	"run": "interprets a stored file as javascript code (syntax: 'run [filename]')",
	"echo": "outputs directly to the terminal (syntax: 'echo [text]')",
	"rps": "Play a round of Rock, Paper, Scissors (syntax: 'rps [rock/paper/scissors]')"
};

var files = {
	"hello.txt": "Hello world!",
	"nietzsche.txt": "To live is to suffer, to survive is to find some meaning in the suffering."
}

// Read and return file contents
function readFile(fileName) {
	if (fileName in files) {
		return files[fileName];
	} else {
		console.log('file not found');
		throw new Error("File '" + fileName + "' not found.");
	}
};

function writeFile(name, contents) {
	console.log('writefile ' + name + ' ' + contents);
	files[name] = contents;
}

//runs the specified command or returns an error
function executeCommand(terminal, argc, argv) {	
	switch (argv[0]) {
		case "clear":
			terminal.clear()
			console.clear();
			break;

		case "help":
			if (argc < 2) {
				terminal.log('commands: ' + Object.keys(commands).join(', '));
			} else {
				if (argv[1] in commands) {
					terminal.log(argv[1] + ": " + commands[argv[1]]);
				} else {
					terminal.log("Command '" + argv[1] + "' not recognized.");
				}
			}
			break;

		case "color":
			if (argc < 2) {
				terminal.log("Error: No color specified.");
			} else {
				terminal.log("Setting color to " + argv[1]);
				$("#terminal-body").css("color", argv[1]);
			}
			break;
		
		case "bgcolor":
			if (argc < 2) {
				terminal.log("Error: No color specified.");
			} else {
				terminal.log("Setting background color to " + argv[1]);
				$("#terminal-body").css("background-color", argv[1]);
			}
			break;
		
		case "wincolor":
			if (argc < 2) {
				terminal.log("Error: No color specified.");
			} else {
				terminal.log("Setting window color to " + argv[1]);
				$("body").css("background-color", argv[1]);
			}
			break;

		case "muffin":
			setInterval(function() {
				var muffins = "Meow ".repeat(Math.floor(Math.random() * 20));
				terminal.log(muffins);
			}, 1000);
			break;

		case "dir":
			if (files.length < 1) {
				terminal.log("There are no files.");
			} else {
				let fileNames = Object.keys(files);
				terminal.log(fileNames.join(', '));
			}
			break;
			
		case "read":
			try {
				terminal.log(readFile(argv[1]));
			} catch(e) {
				terminal.log(e.toString());
			}
			break;
			
		case "write":
			console.log("write");
			if (argc < 2) {
				terminal.log("Error: No file specified.");
			} else {
				console.log('yo');
				let fileName = argv[1];
				let fileContents = argv.slice(2).join(' ');
				writeFile(fileName, fileContents);
				terminal.log("Wrote to " + fileName);
			}
			break;
			
		case "run":
			terminal.log("Executing program '" + argv[1] + "'...");
			terminal.log(eval(readFromFile(argv[1])));
			break;
			
		case "del":
			if (argv[1] in files) {
				delete files[argv[1]];
				terminal.log("Deleted " + argv[1]);
			} else {
				terminal.log("Errpr: File not found.");
			}
			break;
		
		case "echo":
			message = argv.slice(1).join(' ');
			terminal.log(message);
			break;
		
		case "rps":
			if (argc == 1) {
				terminal.log("No choice specified. (syntax: rps [rock/paper/scissors])");
				break;
			}
			
			playerChoice = argv[1].toLowerCase();
			terminal.log("You chose: " + playerChoice);
			
			let cpuChoice = Math.random();
			if (cpuChoice <= 0.33) cpuChoice = "rock";
			else if (cpuChoice <= 0.66) cpuChoice = "paper";
			else cpuChoice = "scissors";
			terminal.log("CPU chose: " + cpuChoice)

			switch(playerChoice) {
				case 'rock':
					if (cpuChoice === "rock") terminal.log("It's a tie!");
					else if (cpuChoice === "paper") terminal.log("CPU wins.")
					else terminal.log("You win!");
					break;
				case 'paper':
					if (cpuChoice === "paper") terminal.log("It's a tie!");
					else if (cpuChoice === "rock") terminal.log("You win!")
					else terminal.log("CPU wins.");
					break;
				case 'scissors':
					if (cpuChoice === "scissors") terminal.log("It's a tie!");
					else if (cpuChoice === "rock") terminal.log("CPU wins.")
					else terminal.log("You wins!");
					break;
				default:
					terminal.log("Invalid choice. (syntax: rps [rock/paper/scissors])");
					break;
			}
			break;
			
		default:
			terminal.log("Command '" + argv[0] + "' not recognized.");
			break;
	}
};
      </script>
  </body>
</html>
